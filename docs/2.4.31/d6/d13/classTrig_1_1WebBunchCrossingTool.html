<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RootCore Packages: Trig::WebBunchCrossingTool Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="../../search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="../../d2/d87/namespaceTrig.html">Trig</a>::<a class="el" href="../../d6/d13/classTrig_1_1WebBunchCrossingTool.html">WebBunchCrossingTool</a>
  </div>
</div>
<div class="contents">
<h1>Trig::WebBunchCrossingTool Class Reference</h1><!-- doxytag: class="Trig::WebBunchCrossingTool" --><!-- doxytag: inherits="Trig::BunchCrossingToolBase" -->
<p>Bunch crossing tool reading the configuration from the web.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d9/d8b/WebBunchCrossingTool_8h_source.html">WebBunchCrossingTool.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Trig::WebBunchCrossingTool:</div>
<div class="dynsection">
 <div class="center">
  <img src="../../d6/d13/classTrig_1_1WebBunchCrossingTool.gif" usemap="#Trig::WebBunchCrossingTool_map" alt=""/>
  <map id="Trig::WebBunchCrossingTool_map" name="Trig::WebBunchCrossingTool_map">
<area href="../../db/df3/classTrig_1_1BunchCrossingToolBase.html" alt="Trig::BunchCrossingToolBase" shape="rect" coords="94,168,272,192"/>
<area href="../../d0/d67/classTrig_1_1IBunchCrossingTool.html" alt="Trig::IBunchCrossingTool" shape="rect" coords="0,112,178,136"/>
<area href="../../da/dfd/classasg_1_1AsgMetadataTool.html" alt="asg::AsgMetadataTool" shape="rect" coords="188,112,366,136"/>
<area href="../../d4/d20/classasg_1_1IAsgTool.html" alt="asg::IAsgTool" shape="rect" coords="0,56,178,80"/>
<area href="../../d5/dbb/classasg_1_1AsgTool.html" alt="asg::AsgTool" shape="rect" coords="188,56,366,80"/>
<area href="../../d4/d20/classasg_1_1IAsgTool.html" alt="asg::IAsgTool" shape="rect" coords="188,0,366,24"/>
</map>
 </div>
</div>

<p><a href="../../d1/df5/classTrig_1_1WebBunchCrossingTool-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dc2/classTrig_1_1WebBunchCrossingTool_1_1IOV.html">IOV</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simplified <a class="el" href="../../dc/dc2/classTrig_1_1WebBunchCrossingTool_1_1IOV.html" title="Simplified IOV class.">IOV</a> class.  <a href="../../dc/dc2/classTrig_1_1WebBunchCrossingTool_1_1IOV.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classTrig_1_1WebBunchCrossingTool.html#aee3f6bacf355b0a124e5f76c412912db">WebBunchCrossingTool</a> (const std::string &amp;name=&quot;WebBunchCrossingTool&quot;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a proper constructor for <a class="el" href="../../d5/dc5/namespaceAthena.html">Athena</a>.  <a href="#aee3f6bacf355b0a124e5f76c412912db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">StatusCode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classTrig_1_1WebBunchCrossingTool.html#a6558e372a061cbf7beff69aaef6750d9">loadConfig</a> (int bgkey)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load a given bunch group key.  <a href="#a6558e372a061cbf7beff69aaef6750d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">StatusCode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classTrig_1_1WebBunchCrossingTool.html#a63acc962f34954b98f214b464ea09c5f">loadConfig</a> (unsigned int run, unsigned int lb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Load the configuration of a given LB.  <a href="#a63acc962f34954b98f214b464ea09c5f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual StatusCode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d13/classTrig_1_1WebBunchCrossingTool.html#a254c9dad047d7856240d0fc00011c885">beginEvent</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function called at the beginning of each event.  <a href="#a254c9dad047d7856240d0fc00011c885"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Bunch crossing tool reading the configuration from the web. </p>
<p>The atlas-trigconf.cern.ch webpage now provides the bunch crossing configuration as JSON data as well. This tool can be used to read this configuration directly from the webpage.</p>
<p>Internally the tool uses ROOT's TSocket to communicate with the webpage.</p>
<p>The tool tries to minimise the times it needs to contact the webserver, but still, it's not supposed to be the fastest implementation of the interface.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Attila Krasznahorkay &lt;<a href="mailto:Attila.Krasznahorkay@cern.ch">Attila.Krasznahorkay@cern.ch</a>&gt;</dd></dl>
<dl class="rcs"><dt><b>Revision</b></dt><dd>657759 </dd></dl>
<dl class="rcs"><dt><b>Date</b></dt><dd>2015-03-30 13:08:15 +0200 (Mon, 30 Mar 2015) </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aee3f6bacf355b0a124e5f76c412912db"></a><!-- doxytag: member="Trig::WebBunchCrossingTool::WebBunchCrossingTool" ref="aee3f6bacf355b0a124e5f76c412912db" args="(const std::string &amp;name=&quot;WebBunchCrossingTool&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Trig::WebBunchCrossingTool::WebBunchCrossingTool </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em> = <code>&quot;WebBunchCrossingTool&quot;</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a proper constructor for <a class="el" href="../../d5/dc5/namespaceAthena.html">Athena</a>. </p>
<p>Default constructor </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a254c9dad047d7856240d0fc00011c885"></a><!-- doxytag: member="Trig::WebBunchCrossingTool::beginEvent" ref="a254c9dad047d7856240d0fc00011c885" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusCode Trig::WebBunchCrossingTool::beginEvent </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function called at the beginning of each event. </p>
<p>This function takes care of keeping the tool up to date with the correct configuration for the currently loaded event. It needs the EventInfo object to do so.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>StatusCode::SUCCESS</code> if the right configuration could be loaded, or <code>StatusCode::FAILURE</code> if not. </dd></dl>

<p>Reimplemented from <a class="el" href="../../da/dfd/classasg_1_1AsgMetadataTool.html#a197cfa14f94c758c53a770544b7dad88">asg::AsgMetadataTool</a>.</p>

</div>
</div>
<a class="anchor" id="a63acc962f34954b98f214b464ea09c5f"></a><!-- doxytag: member="Trig::WebBunchCrossingTool::loadConfig" ref="a63acc962f34954b98f214b464ea09c5f" args="(unsigned int run, unsigned int lb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusCode Trig::WebBunchCrossingTool::loadConfig </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>run</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>lb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load the configuration of a given LB. </p>
<p>This function can be used to load the bunch structure information for a given run and luminosity block number.</p>
<p>First the function checks in its cache which BG key this period corresponds to. If the requested luminosity block is already known in the cache, then the function asks <a class="el" href="../../d6/d13/classTrig_1_1WebBunchCrossingTool.html#a6558e372a061cbf7beff69aaef6750d9" title="Load a given bunch group key.">loadConfig(int)</a> to load the configuration. If the luminosity block is not known, the function reads the configuration for the entire run from the webpage, and lets cacheJSONConfig(...) load it into the internal cache. After the new configuration is cached, the function calls itself recursively, because this time it will know right away what to do.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>run</em>&nbsp;</td><td>The run number of the data you're analysing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lb</em>&nbsp;</td><td>The luminosity block number of the data you're analysing </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>StatusCode::SUCCESS</code> if the configuration was loaded successfully, or <code>StatusCode::FAILURE</code> if it wasn't </dd></dl>

</div>
</div>
<a class="anchor" id="a6558e372a061cbf7beff69aaef6750d9"></a><!-- doxytag: member="Trig::WebBunchCrossingTool::loadConfig" ref="a6558e372a061cbf7beff69aaef6750d9" args="(int bgkey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusCode Trig::WebBunchCrossingTool::loadConfig </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bgkey</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Load a given bunch group key. </p>
<p>This is the fairly complicated function which (if necessary) loads the configuration belonging to BG key "bgkey" from either the internal cache of the tool, or from the atlas-trigconf.cern.ch webpage directly.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bgkey</em>&nbsp;</td><td>The bunch group key that should be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>StatusCode::SUCCESS</code> if the operation was successful, or <code>StatusCode::FAILURE</code> if it wasn't </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.31/TrigBunchCrossingTool/TrigBunchCrossingTool/<a class="el" href="../../d9/d8b/WebBunchCrossingTool_8h_source.html">WebBunchCrossingTool.h</a></li>
<li>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.31/TrigBunchCrossingTool/Root/WebBunchCrossingTool.cxx</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Apr 2017 for RootCore Packages by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
