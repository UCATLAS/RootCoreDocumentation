<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RootCore Packages: JetVertexTaggerTool Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='../../open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='../../closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='../../closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="contents">
<h1>JetVertexTaggerTool Class Reference</h1><!-- doxytag: class="JetVertexTaggerTool" --><!-- doxytag: inherits="asg::AsgTool,IJetModifier,IJetUpdateJvt" -->
<p><code>#include &lt;<a class="el" href="../../d0/da6/JetVertexTaggerTool_8h_source.html">JetVertexTaggerTool.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for JetVertexTaggerTool:</div>
<div class="dynsection">
 <div class="center">
  <img src="../../d4/dcb/classJetVertexTaggerTool.gif" usemap="#JetVertexTaggerTool_map" alt=""/>
  <map id="JetVertexTaggerTool_map" name="JetVertexTaggerTool_map">
<area href="../../d5/dbb/classasg_1_1AsgTool.html" alt="asg::AsgTool" shape="rect" coords="0,56,130,80"/>
<area href="../../d8/d74/classIJetModifier.html" alt="IJetModifier" shape="rect" coords="140,56,270,80"/>
<area href="../../d1/dab/classIJetUpdateJvt.html" alt="IJetUpdateJvt" shape="rect" coords="280,56,410,80"/>
<area href="../../d4/d20/classasg_1_1IAsgTool.html" alt="asg::IAsgTool" shape="rect" coords="0,0,130,24"/>
<area href="../../d4/d20/classasg_1_1IAsgTool.html" alt="asg::IAsgTool" shape="rect" coords="140,0,270,24"/>
<area href="../../d4/d20/classasg_1_1IAsgTool.html" alt="asg::IAsgTool" shape="rect" coords="280,0,410,24"/>
</map>
 </div>
</div>

<p><a href="../../d5/d5c/classJetVertexTaggerTool-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7a894fc55116bbe8436948f880008173"></a><!-- doxytag: member="JetVertexTaggerTool::JetVertexTaggerTool" ref="a7a894fc55116bbe8436948f880008173" args="(const std::string &amp;name)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>JetVertexTaggerTool</b> (const std::string &amp;name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">StatusCode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dcb/classJetVertexTaggerTool.html#aef0d21043fb44db273ea060a7eaf1da4">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dcb/classJetVertexTaggerTool.html#a94a17590e6c9bfddae903dc34c4bfecf">modify</a> (<a class="el" href="../../d0/d4d/classDataVector.html">xAOD::JetContainer</a> &amp;jetCont) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae027e0d0b8431e5956e9d61df2b6b8ff"></a><!-- doxytag: member="JetVertexTaggerTool::finalize" ref="ae027e0d0b8431e5956e9d61df2b6b8ff" args="()" -->
StatusCode&nbsp;</td><td class="memItemRight" valign="bottom"><b>finalize</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abda2c641ac81151cec62f7f839fa5334"></a><!-- doxytag: member="JetVertexTaggerTool::evaluateJvt" ref="abda2c641ac81151cec62f7f839fa5334" args="(float rpt, float jvfcorr) const " -->
float&nbsp;</td><td class="memItemRight" valign="bottom"><b>evaluateJvt</b> (float rpt, float jvfcorr) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dcb/classJetVertexTaggerTool.html#ae32f6a8f40623f2c05a6b0bafb408d88">updateJvt</a> (const <a class="el" href="../../db/d9c/classxAOD_1_1Jet__v1.html">xAOD::Jet</a> &amp;jet, std::string sjvt=&quot;Jvt&quot;, std::string scale=&quot;JetPileupScaleMomentum&quot;) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1ad928b8b0034bea1859d983f296f071"></a><!-- doxytag: member="JetVertexTaggerTool::getJetVertexTrackSums" ref="a1ad928b8b0034bea1859d983f296f071" args="(const xAOD::Vertex *, const std::vector&lt; const xAOD::TrackParticle * &gt; &amp;, const jet::TrackVertexAssociation *) const " -->
std::pair&lt; float, float &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>getJetVertexTrackSums</b> (const <a class="el" href="../../db/dd1/classxAOD_1_1Vertex__v1.html">xAOD::Vertex</a> *, const std::vector&lt; const <a class="el" href="../../d9/d1d/classxAOD_1_1TrackParticle__v1.html">xAOD::TrackParticle</a> * &gt; &amp;, const <a class="el" href="../../d8/da5/classjet_1_1TrackVertexAssociation.html">jet::TrackVertexAssociation</a> *) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab34c25d9e456d25d49ec5de275fb12c6"></a><!-- doxytag: member="JetVertexTaggerTool::getPileupTrackCount" ref="ab34c25d9e456d25d49ec5de275fb12c6" args="(const xAOD::Vertex *, const xAOD::TrackParticleContainer *&amp;, const jet::TrackVertexAssociation *) const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getPileupTrackCount</b> (const <a class="el" href="../../db/dd1/classxAOD_1_1Vertex__v1.html">xAOD::Vertex</a> *, const <a class="el" href="../../d0/d4d/classDataVector.html">xAOD::TrackParticleContainer</a> *&amp;, const <a class="el" href="../../d8/da5/classjet_1_1TrackVertexAssociation.html">jet::TrackVertexAssociation</a> *) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab920f99a891365e6df9bc4b6bd989fe9"></a><!-- doxytag: member="JetVertexTaggerTool::findHSVertex" ref="ab920f99a891365e6df9bc4b6bd989fe9" args="(const xAOD::VertexContainer *&amp;) const " -->
const <a class="el" href="../../db/dd1/classxAOD_1_1Vertex__v1.html">xAOD::Vertex</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>findHSVertex</b> (const <a class="el" href="../../d0/d4d/classDataVector.html">xAOD::VertexContainer</a> *&amp;) const </td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>James Frost <br/>
 November 2014</p>
<p>Tool to calculate the jet vertex tag (JVT) JVT is a float per jet</p>
<p>The JVT likelihood is parameterised in terms of: RPT: ratio of the primary vertex track sum to the jet pT JVFCorr: a corrected JVF calculation accounting for the number of PU tracks in the event.</p>
<p>Calculation requires three main types of information 1. Vertex container for the event (from evtStore), with respect to which the JVT track sums 2. Tracks associated to each of the input jet (in the jet aux store) 3. Track vertex association object (from evtStore) 4. The track container needed for PU track counting 5. The ID track selector tool to provide an input track selection. 6. An input file with the JVT likelihood stored as a 2D histogram.</p>
<p>Using this information, the procedure can be broken into three main steps: 1. Count the total number of pileup tracks 2. Per jet: Get track pT sums needed for JVFCorr and RpT 3. Use JVT likelihood to get JVT value</p>
<p>Attributes added (each is a float per jet): 1. Jvt - the JVTLikelihood value for the jet. This is parameterised in terms of: 2. JvtRpt - the ratio of the PV track pT sum to the jet pT 3. JvtJvfcorr - a corrected Jvf quantity that corrects for the number of pileup tracks in an event.</p>
<p>Properties: VertexContainer - name of the vertex container TrackParticleContainer - name of the track container AssociatedTracks - name for attribute holding the list of associated tracks TrackVertexAssociation - name for the container holding the track-vertex associations TrackSelector - tool to select tracks (none ==&gt; no selection) JVTFileName - ROOT Filename containing JVT likelihood histogram JVTLikelihoodHistName - JVT Likelihood histogram name JVTName - name for the 3 JVT attributes (default is "JVT") K_JVFCorrScale - the scale factor for pileup tracks in the JVFCorr calculation (default is 0.01) Z0Cut - Z0 value (in mm) within which tracks associated to no vertex may be assigned to the primary vertex (default is 3.) PUTrkPtCut - the track pT (in MeV) below which tracks associated to no vertex may be assigned to the primary vertex (default is 30000.) </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aef0d21043fb44db273ea060a7eaf1da4"></a><!-- doxytag: member="JetVertexTaggerTool::initialize" ref="aef0d21043fb44db273ea060a7eaf1da4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusCode JetVertexTaggerTool::initialize </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Dummy implementation of the initialisation function</p>
<p>It's here to allow the dual-use tools to skip defining an initialisation function. Since many are doing so... </p>

<p>Reimplemented from <a class="el" href="../../d5/dbb/classasg_1_1AsgTool.html#a55b3c013a3e54ae4c1d0d76de8e1e726">asg::AsgTool</a>.</p>

</div>
</div>
<a class="anchor" id="a94a17590e6c9bfddae903dc34c4bfecf"></a><!-- doxytag: member="JetVertexTaggerTool::modify" ref="a94a17590e6c9bfddae903dc34c4bfecf" args="(xAOD::JetContainer &amp;jetCont) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int JetVertexTaggerTool::modify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d4d/classDataVector.html">xAOD::JetContainer</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>jets</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Method to modify a jet collection. Returns 0 for success. </p>

<p>Implements <a class="el" href="../../d8/d74/classIJetModifier.html#a478a12c5e40091c02bab649851e21110">IJetModifier</a>.</p>

</div>
</div>
<a class="anchor" id="ae32f6a8f40623f2c05a6b0bafb408d88"></a><!-- doxytag: member="JetVertexTaggerTool::updateJvt" ref="ae32f6a8f40623f2c05a6b0bafb408d88" args="(const xAOD::Jet &amp;jet, std::string sjvt=&quot;Jvt&quot;, std::string scale=&quot;JetPileupScaleMomentum&quot;) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float JetVertexTaggerTool::updateJvt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../db/d9c/classxAOD_1_1Jet__v1.html">xAOD::Jet</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>jet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>sjvt</em> = <code>&quot;Jvt&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&nbsp;</td>
          <td class="paramname"> <em>scale</em> = <code>&quot;JetPileupScaleMomentum&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Calculate the updated JVT. jet - jet for which JVT is updated sjvt - name of the existing JVT moment (and prefix for RpT and JVFcorr). scale - name of the jet scale holding the original pT The new value for JVT is returned. </p>

<p>Implements <a class="el" href="../../d1/dab/classIJetUpdateJvt.html#a1ec4890972fed165cf21c367a8597fc5">IJetUpdateJvt</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.30/JetMomentTools/JetMomentTools/<a class="el" href="../../d0/da6/JetVertexTaggerTool_8h_source.html">JetVertexTaggerTool.h</a></li>
<li>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.30/JetMomentTools/Root/JetVertexTaggerTool.cxx</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 15 Apr 2017 for RootCore Packages by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
