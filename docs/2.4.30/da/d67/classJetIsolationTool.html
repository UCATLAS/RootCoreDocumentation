<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RootCore Packages: JetIsolationTool Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='../../open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='../../closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='../../closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="contents">
<h1>JetIsolationTool Class Reference</h1><!-- doxytag: class="JetIsolationTool" --><!-- doxytag: inherits="JetModifierBase" -->
<p><code>#include &lt;<a class="el" href="../../db/d52/JetIsolationTool_8h_source.html">JetIsolationTool.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for JetIsolationTool:</div>
<div class="dynsection">
 <div class="center">
  <img src="../../da/d67/classJetIsolationTool.gif" usemap="#JetIsolationTool_map" alt=""/>
  <map id="JetIsolationTool_map" name="JetIsolationTool_map">
<area href="../../d5/db8/classJetModifierBase.html" alt="JetModifierBase" shape="rect" coords="124,112,238,136"/>
<area href="../../d5/dbb/classasg_1_1AsgTool.html" alt="asg::AsgTool" shape="rect" coords="0,56,114,80"/>
<area href="../../d8/d74/classIJetModifier.html" alt="IJetModifier" shape="rect" coords="124,56,238,80"/>
<area href="../../d7/db4/classISingleJetModifier.html" alt="ISingleJetModifier" shape="rect" coords="248,56,362,80"/>
<area href="../../d4/d20/classasg_1_1IAsgTool.html" alt="asg::IAsgTool" shape="rect" coords="0,0,114,24"/>
<area href="../../d4/d20/classasg_1_1IAsgTool.html" alt="asg::IAsgTool" shape="rect" coords="124,0,238,24"/>
<area href="../../d4/d20/classasg_1_1IAsgTool.html" alt="asg::IAsgTool" shape="rect" coords="248,0,362,24"/>
</map>
 </div>
</div>

<p><a href="../../d2/d1c/classJetIsolationTool-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ab6bc70bd22cb0932a318d066fd4021"></a><!-- doxytag: member="JetIsolationTool::JetIsolationTool" ref="a3ab6bc70bd22cb0932a318d066fd4021" args="(const std::string &amp;myname)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classJetIsolationTool.html#a3ab6bc70bd22cb0932a318d066fd4021">JetIsolationTool</a> (const std::string &amp;myname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Ctor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3f4f88013872d240d48517c9fe5d8b43"></a><!-- doxytag: member="JetIsolationTool::~JetIsolationTool" ref="a3f4f88013872d240d48517c9fe5d8b43" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classJetIsolationTool.html#a3f4f88013872d240d48517c9fe5d8b43">~JetIsolationTool</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dtor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">StatusCode&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classJetIsolationTool.html#aa68076a8a26454735b2234898aef9375">initialize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1012658259bdc0d716c103170ce5a045"></a><!-- doxytag: member="JetIsolationTool::finalize" ref="a1012658259bdc0d716c103170ce5a045" args="()" -->
StatusCode&nbsp;</td><td class="memItemRight" valign="bottom"><b>finalize</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acbd2196ffed4da7f2c83303af4bd0246"></a><!-- doxytag: member="JetIsolationTool::modify" ref="acbd2196ffed4da7f2c83303af4bd0246" args="(xAOD::JetContainer &amp;jets) const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classJetIsolationTool.html#acbd2196ffed4da7f2c83303af4bd0246">modify</a> (<a class="el" href="../../d0/d4d/classDataVector.html">xAOD::JetContainer</a> &amp;jets) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loop over calls to modifyJet. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classJetIsolationTool.html#a70ab597825fdba632635652d3754021f">modifyJet</a> (<a class="el" href="../../db/d9c/classxAOD_1_1Jet__v1.html">xAOD::Jet</a> &amp;) const </td></tr>
<tr><td colspan="2"><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63be64d393d0c50ab24f99deac195b38"></a><!-- doxytag: member="JetIsolationTool::jet::JetIsolation::IsolationCalculator" ref="a63be64d393d0c50ab24f99deac195b38" args="" -->
class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d67/classJetIsolationTool.html#a63be64d393d0c50ab24f99deac195b38">jet::JetIsolation::IsolationCalculator</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Calculate isolation variables for jets and set them as jet attributes.</p>
<p>Properties: IsolationCalculations: List of calculations to perform (see below) <a class="el" href="../../d3/d58/classPseudoJetGetter.html">PseudoJetGetter</a>: Pseudojet getter (ToolHandle&lt;IPseudoJetGetter&gt;)</p>
<p>The isolation variables are calculated from a list of input constituents. which are close to the jet but not part of its constituents. There are multiple options to find this list and then to calculate the variables. They are passed to the tools by giving a list of string identifiers through the IsolationCalculations property as in</p>
<p>IsolationCalculations = ["IsoKR:11:Perp","IsoKR:11:Par", "IsoFixedCone:10:SumPt",]</p>
<p>where the strings have the form "ISOCRITERIA:NN:VAR"</p>
<ul>
<li>ISOCRITERIA : encode the method used to find isolation particles (IsoKR, IsoDelta, IsoFixedCone, IsoFixedArea, Iso6To8, signification detailed below)</li>
<li>NN : encode the value of the main parameter of ISOCRITERIA : the actual parameter used is NN/10. (same convetion as jet radius in JetContainer names)</li>
<li>VAR : encode the variable to be calculated (Per, Par, SumPt, <a class="el" href="../../dc/dec/structP.html">P</a>, significations detailed below)</li>
</ul>
<p>The resulting attribute name is simply the identifier string with ':' removed. Example "IsoKR:11:Perp" -&gt; "IsoKR11Perp"</p>
<p>The input particles container from which constituents come from must be specified in the ConstituentContainer property. This must correspond to an IParticleContainer in the event store. (longer term : make it possible to pass PseudoJetContainer)</p>
<p>There are several technical difficulties</p>
<ul>
<li>the multiplicity of possible variables</li>
<li>the dependency on the calibration state of the constituents</li>
<li>the calculation time (looking up the full input container for each jet constituents can be *very* slow) These are solved at the cost of increased complexity (internal helper classes, usage of a special fast lookup map), details in the .cxx file.</li>
</ul>
<p>WARNING : currently works well only for LCTopoJets, TrackJets, TruthJets AND small <a class="el" href="../../d8/df7/structR.html">R</a> jets (<a class="el" href="../../d8/df7/structR.html">R</a> ~&lt;0.8)</p>
<p>WARNING: The constituents are pseudojets objtained from a pseudojet getter. This should be the same pseudojet getter used in the jet finding. The isolation tool must be run in the same job as the jet finding.</p>
<p>Isolation Criteria ("param" below is the main parameter) :</p>
<ul>
<li>IsoKR : iso area == cone of size __jetRadius*param__</li>
<li>IsoDelta : iso area == cone of size __jetRadius+param__</li>
<li>IsoFixedCone : iso are == cone of size __param__</li>
<li>IsoFixedArea : iso are == cone of size __sqrt(jetRadius*jetRadius+param/M_PI)__</li>
<li>Iso6To8 : iso area == annulus between R=0.6 and R=0.8</li>
</ul>
<p>Isolation Variables (iso4vec = sum of 4-vec in isolation area, not part of jet)</p>
<ul>
<li>Perp : iso4Vec.Perp( jetDirection )</li>
<li>Par : iso4Vec.Dot( jetDirection )</li>
<li>SumPt : sum Pt of 4-vec contibuting to iso4Vec</li>
<li><a class="el" href="../../dc/dec/structP.html">P</a> : iso4Vec.Vect().Mag() </li>
</ul>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa68076a8a26454735b2234898aef9375"></a><!-- doxytag: member="JetIsolationTool::initialize" ref="aa68076a8a26454735b2234898aef9375" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">StatusCode JetIsolationTool::initialize </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Dummy implementation of the initialisation function</p>
<p>It's here to allow the dual-use tools to skip defining an initialisation function. Since many are doing so... </p>

<p>Reimplemented from <a class="el" href="../../d5/dbb/classasg_1_1AsgTool.html#a55b3c013a3e54ae4c1d0d76de8e1e726">asg::AsgTool</a>.</p>

</div>
</div>
<a class="anchor" id="a70ab597825fdba632635652d3754021f"></a><!-- doxytag: member="JetIsolationTool::modifyJet" ref="a70ab597825fdba632635652d3754021f" args="(xAOD::Jet &amp;) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int JetIsolationTool::modifyJet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d9c/classxAOD_1_1Jet__v1.html">xAOD::Jet</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>jet</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Method to modify a jet. Returns 0 for success. </p>

<p>Implements <a class="el" href="../../d7/db4/classISingleJetModifier.html#a0ed556178abf9979789510a3c76dd269">ISingleJetModifier</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.30/JetMomentTools/JetMomentTools/<a class="el" href="../../db/d52/JetIsolationTool_8h_source.html">JetIsolationTool.h</a></li>
<li>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.30/JetMomentTools/src/JetIsolationTool.cxx</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 15 Apr 2017 for RootCore Packages by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
