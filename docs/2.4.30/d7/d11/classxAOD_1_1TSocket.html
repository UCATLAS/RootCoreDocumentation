<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RootCore Packages: xAOD::TSocket Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='../../open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='../../closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='../../closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
  <div class="navpath"><a class="el" href="../../dd/d44/namespacexAOD.html">xAOD</a>::<a class="el" href="../../d7/d11/classxAOD_1_1TSocket.html">TSocket</a>
  </div>
<div class="contents">
<h1>xAOD::TSocket Class Reference</h1><!-- doxytag: class="xAOD::TSocket" -->
<p><code>#include &lt;<a class="el" href="../../d3/d40/TSocket_8h_source.html">TSocket.h</a>&gt;</code></p>

<p><a href="../../dd/d7a/classxAOD_1_1TSocket-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8c38a7e113e6d90a577df6f11c56552f"></a><!-- doxytag: member="xAOD::TSocket::TSocket" ref="a8c38a7e113e6d90a577df6f11c56552f" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d11/classxAOD_1_1TSocket.html#a8c38a7e113e6d90a577df6f11c56552f">TSocket</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor with an address and a port. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afdb782ad69a0af7eee391ea2f240e1f1"></a><!-- doxytag: member="xAOD::TSocket::~TSocket" ref="afdb782ad69a0af7eee391ea2f240e1f1" args="()" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d11/classxAOD_1_1TSocket.html#afdb782ad69a0af7eee391ea2f240e1f1">~TSocket</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/da4/classxAOD_1_1TReturnCode.html">TReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d11/classxAOD_1_1TSocket.html#a94bc6ee554ef95945c4ec278c3adab2c">connect</a> (const TInetAddress &amp;address, int port)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function connecting to the specified address.  <a href="#a94bc6ee554ef95945c4ec278c3adab2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa4260fe0082f7278a3511facd271e59"></a><!-- doxytag: member="xAOD::TSocket::close" ref="aaa4260fe0082f7278a3511facd271e59" args="()" -->
<a class="el" href="../../d1/da4/classxAOD_1_1TReturnCode.html">TReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d11/classxAOD_1_1TSocket.html#aaa4260fe0082f7278a3511facd271e59">close</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close the current connection. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4c7aa5e5f48178987f12e8a3b825a90e"></a><!-- doxytag: member="xAOD::TSocket::isConnected" ref="a4c7aa5e5f48178987f12e8a3b825a90e" args="() const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d11/classxAOD_1_1TSocket.html#a4c7aa5e5f48178987f12e8a3b825a90e">isConnected</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if the socket is connected to some address at the moment. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d1/da4/classxAOD_1_1TReturnCode.html">TReturnCode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d11/classxAOD_1_1TSocket.html#a2f7b437e94951ccbf776e40388221af6">send</a> (const TString &amp;payload)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function sending a message to the connected address.  <a href="#a2f7b437e94951ccbf776e40388221af6"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Very simple wrapper around POSIX sockets</p>
<p>Since ROOT's <a class="el" href="../../d7/d11/classxAOD_1_1TSocket.html">TSocket</a> is not fit to be used in TFileAccessTracer's destructor (as some ROOT infrastructure may not be available by the time the destructor is called), we need our own simple implementation instead.</p>
<p>Most of the implementation is simply a copy of the code from TUnixSystem. Slightly simplified in some cases where we don't need the flexibility of the ROOT implementation.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Attila Krasznahorkay &lt;<a href="mailto:Attila.Krasznahorkay@cern.ch">Attila.Krasznahorkay@cern.ch</a>&gt;</dd></dl>
<dl class="rcs"><dt><b>Revision</b></dt><dd>781356 </dd></dl>
<dl class="rcs"><dt><b>Date</b></dt><dd>2016-10-31 15:03:28 +0100 (Mon, 31 Oct 2016) </dd></dl>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a94bc6ee554ef95945c4ec278c3adab2c"></a><!-- doxytag: member="xAOD::TSocket::connect" ref="a94bc6ee554ef95945c4ec278c3adab2c" args="(const TInetAddress &amp;address, int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/da4/classxAOD_1_1TReturnCode.html">TReturnCode</a> xAOD::TSocket::connect </td>
          <td>(</td>
          <td class="paramtype">const TInetAddress &amp;&nbsp;</td>
          <td class="paramname"> <em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function connecting to the specified address. </p>
<p>It turns out that translating a string address name into an integer address that the connect(...) function understands, is no easy feat. So instead we leave that up to ROOT. This translation just needs to be done "early enough" in the job when ROOT can still do it.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>The address to send the data to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>The port number to connect to returns The usual return codes... </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2f7b437e94951ccbf776e40388221af6"></a><!-- doxytag: member="xAOD::TSocket::send" ref="a2f7b437e94951ccbf776e40388221af6" args="(const TString &amp;payload)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d1/da4/classxAOD_1_1TReturnCode.html">TReturnCode</a> xAOD::TSocket::send </td>
          <td>(</td>
          <td class="paramtype">const TString &amp;&nbsp;</td>
          <td class="paramname"> <em>payload</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function sending a message to the connected address. </p>
<p>This function is custom made for our use case. It sends HTML style information to the connected server.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>payload</em>&nbsp;</td><td>The HTML style payload to send to the server </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The usual return codes... </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.30/xAODRootAccess/xAODRootAccess/tools/<a class="el" href="../../d3/d40/TSocket_8h_source.html">TSocket.h</a></li>
<li>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.30/xAODRootAccess/Root/TSocket.cxx</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 15 Apr 2017 for RootCore Packages by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
