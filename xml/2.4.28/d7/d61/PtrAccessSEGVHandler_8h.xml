<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.6.1">
  <compounddef id="d7/d61/PtrAccessSEGVHandler_8h" kind="file">
    <compoundname>PtrAccessSEGVHandler.h</compoundname>
    <includes local="no">signal.h</includes>
    <includes local="no">vector</includes>
    <includedby refid="df/d6c/cPtrAccessSEGVHandler_8cxx" local="yes">/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/CxxUtils/Root/cPtrAccessSEGVHandler.cxx</includedby>
    <includedby refid="d6/d07/PtrAccessSEGVHandler_8cxx" local="yes">/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/CxxUtils/Root/PtrAccessSEGVHandler.cxx</includedby>
    <includedby refid="dc/d70/SEGVHandler__test_8cxx" local="yes">/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/CxxUtils/test/SEGVHandler_test.cxx</includedby>
    <incdepgraph>
      <node id="110753">
        <label>vector</label>
      </node>
      <node id="110752">
        <label>signal.h</label>
      </node>
      <node id="110751">
        <label>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/CxxUtils/CxxUtils/PtrAccessSEGVHandler.h</label>
        <link refid="PtrAccessSEGVHandler.h"/>
        <childnode refid="110752" relation="include">
        </childnode>
        <childnode refid="110753" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <innerclass refid="dc/d96/classPtrAccessSEGVHandler" prot="public">PtrAccessSEGVHandler</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="d7/d61/PtrAccessSEGVHandler_8h_1a013f3533c0a655529a5af06ae94b9111" prot="public" static="no">
        <name>CXXUTILS_PTRACCESSSEGVHANDLER_H</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/CxxUtils/CxxUtils/PtrAccessSEGVHandler.h" line="3" bodyfile="/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/CxxUtils/CxxUtils/PtrAccessSEGVHandler.h" bodystart="3" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>This class provides a handle function that logs the addresses that had an access violation. It can be installed as sigaction handler using its <ref refid="db/db2/structC" kindref="compound">C</ref> facade in cPtrAccessSIGVHandler.h. The purpose (at least the original one) is to protect all pages containing heap objects managed by <ref refid="dd/d95/classStoreGateSvc" kindref="compound">StoreGateSvc</ref>, install the handler, and then see which objects have actually been accessed. </para>    </briefdescription>
    <detaileddescription>
<para><simplesect kind="author"><para>Paolo Calafiura </para></simplesect>
<simplesect kind="date"><para>Jan 2009 </para></simplesect>
<simplesect kind="rcs"><title>Id</title><para><ref refid="d7/d61/PtrAccessSEGVHandler_8h" kindref="compound">PtrAccessSEGVHandler.h</ref>,v 1.2 2009-02-04 02:02:19 calaf Exp </para></simplesect>
</para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//<sp/>This<sp/>file&apos;s<sp/>extension<sp/>implies<sp/>that<sp/>it&apos;s<sp/>C,<sp/>but<sp/>it&apos;s<sp/>really<sp/>-*-<sp/>C++<sp/>-*-.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>CXXUTILS_PTRACCESSSEGVHANDLER_H</highlight></codeline>
<codeline lineno="3"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>CXXUTILS_PTRACCESSSEGVHANDLER_H<sp/>1</highlight></codeline>
<codeline lineno="4"><highlight class="preprocessor"></highlight></codeline>
<codeline lineno="18"><highlight class="preprocessor">#include<sp/>&lt;signal.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>siginfo_t<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;vector&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="dc/dc5/classPageAccessControl" kindref="compound">PageAccessControl</ref>;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23" refid="dc/d96/classPtrAccessSEGVHandler" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="dc/d96/classPtrAccessSEGVHandler" kindref="compound">PtrAccessSEGVHandler</ref><sp/>{</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="26" refid="dc/d96/classPtrAccessSEGVHandler_1a0bfedfea7794f29388bfd93d5a99dc9e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/>std::vector&lt;void*&gt;<sp/><ref refid="dc/d96/classPtrAccessSEGVHandler_1a0bfedfea7794f29388bfd93d5a99dc9e" kindref="member" tooltip="the list of accessed pointers">accessed_t</ref>;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/>accessed_t::const_iterator<sp/>const_iterator;</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="dc/d96/classPtrAccessSEGVHandler_1a0bfedfea7794f29388bfd93d5a99dc9e" kindref="member" tooltip="the list of accessed pointers">accessed_t</ref>&amp;<sp/>accessedPtrs()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>m_accessed;<sp/>}</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/>const_iterator<sp/>beginAccessedPtrs()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>m_accessed.begin();<sp/>}</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/>const_iterator<sp/>endAccessedPtrs()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>m_accessed.end();<sp/>}</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>reset()<sp/>{<sp/>m_accessed.clear();<sp/>}</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><ref refid="dc/d96/classPtrAccessSEGVHandler" kindref="compound">PtrAccessSEGVHandler</ref>(<ref refid="dc/dc5/classPageAccessControl" kindref="compound">PageAccessControl</ref>&amp;<sp/>pac,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>reservedSize=65535)<sp/>:</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>m_pac(pac)<sp/></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//we<sp/>must<sp/>reserve<sp/>enough<sp/>elements,<sp/>or<sp/>we<sp/>risk<sp/>vector<sp/>allocating<sp/>in<sp/>a<sp/>protected<sp/>page<sp/>during<sp/>handle()...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/>m_accessed.reserve(reservedSize);</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="dc/d96/classPtrAccessSEGVHandler_1a02f4a01fdfe37d071a2f57f45fd91239" kindref="member" tooltip="the actual signal handler">handle</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>signal_number,<ref refid="dc/dbc/structsiginfo__t" kindref="compound">siginfo_t</ref><sp/>*sigi,</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*unused);</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="keyword">private</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><ref refid="dc/dc5/classPageAccessControl" kindref="compound">PageAccessControl</ref>&amp;<sp/>m_pac;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><ref refid="dc/d96/classPtrAccessSEGVHandler_1a0bfedfea7794f29388bfd93d5a99dc9e" kindref="member" tooltip="the list of accessed pointers">accessed_t</ref><sp/>m_accessed;</highlight></codeline>
<codeline lineno="48"><highlight class="normal">};</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
    </programlisting>
    <location file="/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/CxxUtils/CxxUtils/PtrAccessSEGVHandler.h"/>
  </compounddef>
</doxygen>
