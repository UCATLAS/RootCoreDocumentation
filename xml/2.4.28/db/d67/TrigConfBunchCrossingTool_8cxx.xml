<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.6.1">
  <compounddef id="db/d67/TrigConfBunchCrossingTool_8cxx" kind="file">
    <compoundname>TrigConfBunchCrossingTool.cxx</compoundname>
    <includes local="no">algorithm</includes>
    <includes local="yes">AthenaKernel/errorcheck.h</includes>
    <includes refid="d9/dfe/BunchGroup_8h" local="yes">TrigConfL1Data/BunchGroup.h</includes>
    <includes refid="d8/de0/BunchGroupSet_8h" local="yes">TrigConfL1Data/BunchGroupSet.h</includes>
    <includes refid="dd/dca/TrigConfBunchCrossingTool_8h" local="yes">TrigConfBunchCrossingTool.h</includes>
    <incdepgraph>
      <node id="308669">
        <label>AsgTools/IAsgTool.h</label>
        <link refid="df/dd4/IAsgTool_8h_source"/>
        <childnode refid="308649" relation="include">
        </childnode>
        <childnode refid="308668" relation="include">
        </childnode>
        <childnode refid="308670" relation="include">
        </childnode>
        <childnode refid="308671" relation="include">
        </childnode>
      </node>
      <node id="308651">
        <label>TrigConfL1Data/L1DataBaseclass.h</label>
        <link refid="d8/db1/L1DataBaseclass_8h_source"/>
        <childnode refid="308652" relation="include">
        </childnode>
      </node>
      <node id="308671">
        <label>GaudiKernel/IAlgTool.h</label>
      </node>
      <node id="308663">
        <label>stdint.h</label>
      </node>
      <node id="308664">
        <label>TrigBunchCrossingTool/BunchCrossingToolBase.h</label>
        <link refid="db/d0d/BunchCrossingToolBase_8h_source"/>
        <childnode refid="308665" relation="include">
        </childnode>
        <childnode refid="308650" relation="include">
        </childnode>
        <childnode refid="308649" relation="include">
        </childnode>
        <childnode refid="308666" relation="include">
        </childnode>
        <childnode refid="308675" relation="include">
        </childnode>
        <childnode refid="308676" relation="include">
        </childnode>
        <childnode refid="308680" relation="include">
        </childnode>
      </node>
      <node id="308672">
        <label>AsgTools/MsgLevel.h</label>
        <link refid="de/d80/MsgLevel_8h"/>
        <childnode refid="308649" relation="include">
        </childnode>
        <childnode refid="308668" relation="include">
        </childnode>
        <childnode refid="308673" relation="include">
        </childnode>
      </node>
      <node id="308646">
        <label>AthenaKernel/errorcheck.h</label>
      </node>
      <node id="308675">
        <label>TrigAnalysisInterfaces/IBunchCrossingTool.h</label>
        <link refid="db/d9f/IBunchCrossingTool_8h_source"/>
        <childnode refid="308650" relation="include">
        </childnode>
        <childnode refid="308669" relation="include">
        </childnode>
      </node>
      <node id="308668">
        <label>AsgTools/AsgToolsConf.h</label>
        <link refid="df/db7/AsgToolsConf_8h_source"/>
      </node>
      <node id="308649">
        <label>string</label>
      </node>
      <node id="308681">
        <label>BunchCrossingConfProviderBase.h</label>
        <link refid="dc/d79/BunchCrossingConfProviderBase_8h_source"/>
        <childnode refid="308682" relation="include">
        </childnode>
        <childnode refid="308675" relation="include">
        </childnode>
      </node>
      <node id="308652">
        <label>TrigConfL1Data/TrigConfData.h</label>
        <link refid="da/da8/TrigConfData_8h_source"/>
        <childnode refid="308648" relation="include">
        </childnode>
        <childnode refid="308649" relation="include">
        </childnode>
      </node>
      <node id="308657">
        <label>GaudiKernel/ServiceHandle.h</label>
      </node>
      <node id="308673">
        <label>GaudiKernel/IMessageSvc.h</label>
      </node>
      <node id="308653">
        <label>TrigConfL1Data/BunchGroupSet.h</label>
        <link refid="d8/de0/BunchGroupSet_8h_source"/>
        <childnode refid="308647" relation="include">
        </childnode>
        <childnode refid="308651" relation="include">
        </childnode>
        <childnode refid="308648" relation="include">
        </childnode>
        <childnode refid="308649" relation="include">
        </childnode>
        <childnode refid="308650" relation="include">
        </childnode>
        <childnode refid="308654" relation="include">
        </childnode>
        <childnode refid="308655" relation="include">
        </childnode>
      </node>
      <node id="308676">
        <label>TrigBunchCrossingTool/BunchCrossing.h</label>
        <link refid="dc/ddd/BunchCrossing_8h_source"/>
        <childnode refid="308648" relation="include">
        </childnode>
        <childnode refid="308677" relation="include">
        </childnode>
      </node>
      <node id="308666">
        <label>AsgTools/AsgMetadataTool.h</label>
        <link refid="dc/dde/AsgMetadataTool_8h_source"/>
        <childnode refid="308667" relation="include">
        </childnode>
      </node>
      <node id="308655">
        <label>sys/types.h</label>
      </node>
      <node id="308661">
        <label>GaudiKernel/IService.h</label>
      </node>
      <node id="308650">
        <label>vector</label>
      </node>
      <node id="308678">
        <label>sstream</label>
      </node>
      <node id="308682">
        <label>TrigAnalysisInterfaces/IBunchCrossingConfProvider.h</label>
        <link refid="d7/d6d/IBunchCrossingConfProvider_8h_source"/>
        <childnode refid="308650" relation="include">
        </childnode>
        <childnode refid="308669" relation="include">
        </childnode>
      </node>
      <node id="308648">
        <label>iosfwd</label>
      </node>
      <node id="308656">
        <label>TrigConfBunchCrossingTool.h</label>
        <link refid="dd/dca/TrigConfBunchCrossingTool_8h_source"/>
        <childnode refid="308657" relation="include">
        </childnode>
        <childnode refid="308658" relation="include">
        </childnode>
        <childnode refid="308659" relation="include">
        </childnode>
        <childnode refid="308660" relation="include">
        </childnode>
        <childnode refid="308664" relation="include">
        </childnode>
        <childnode refid="308681" relation="include">
        </childnode>
      </node>
      <node id="308644">
        <label>/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/TrigBunchCrossingTool/src/TrigConfBunchCrossingTool.cxx</label>
        <link refid="TrigConfBunchCrossingTool.cxx"/>
        <childnode refid="308645" relation="include">
        </childnode>
        <childnode refid="308646" relation="include">
        </childnode>
        <childnode refid="308647" relation="include">
        </childnode>
        <childnode refid="308653" relation="include">
        </childnode>
        <childnode refid="308656" relation="include">
        </childnode>
      </node>
      <node id="308679">
        <label>GaudiKernel/MsgStream.h</label>
      </node>
      <node id="308677">
        <label>AsgTools/MsgStream.h</label>
        <link refid="d3/d95/AsgTools_2AsgTools_2MsgStream_8h_source"/>
        <childnode refid="308649" relation="include">
        </childnode>
        <childnode refid="308678" relation="include">
        </childnode>
        <childnode refid="308668" relation="include">
        </childnode>
        <childnode refid="308672" relation="include">
        </childnode>
        <childnode refid="308669" relation="include">
        </childnode>
        <childnode refid="308679" relation="include">
        </childnode>
      </node>
      <node id="308670">
        <label>AsgTools/AsgToolMacros.h</label>
        <link refid="d1/d68/AsgToolMacros_8h_source"/>
      </node>
      <node id="308658">
        <label>GaudiKernel/IIncidentListener.h</label>
      </node>
      <node id="308662">
        <label>TrigConfInterfaces/IILVL1ConfigSvc.h</label>
        <link refid="db/d1f/IILVL1ConfigSvc_8h_source"/>
        <childnode refid="308663" relation="include">
        </childnode>
      </node>
      <node id="308680">
        <label>TrigBunchCrossingTool/BunchTrain.h</label>
        <link refid="d5/d28/BunchTrain_8h_source"/>
        <childnode refid="308665" relation="include">
        </childnode>
        <childnode refid="308648" relation="include">
        </childnode>
        <childnode refid="308677" relation="include">
        </childnode>
        <childnode refid="308676" relation="include">
        </childnode>
      </node>
      <node id="308659">
        <label>GaudiKernel/IIncidentSvc.h</label>
      </node>
      <node id="308665">
        <label>set</label>
      </node>
      <node id="308647">
        <label>TrigConfL1Data/BunchGroup.h</label>
        <link refid="d9/dfe/BunchGroup_8h_source"/>
        <childnode refid="308648" relation="include">
        </childnode>
        <childnode refid="308649" relation="include">
        </childnode>
        <childnode refid="308650" relation="include">
        </childnode>
        <childnode refid="308651" relation="include">
        </childnode>
      </node>
      <node id="308645">
        <label>algorithm</label>
      </node>
      <node id="308667">
        <label>AsgTools/AsgTool.h</label>
        <link refid="d4/d29/AsgTool_8h_source"/>
        <childnode refid="308668" relation="include">
        </childnode>
        <childnode refid="308669" relation="include">
        </childnode>
        <childnode refid="308672" relation="include">
        </childnode>
        <childnode refid="308674" relation="include">
        </childnode>
      </node>
      <node id="308660">
        <label>TrigConfInterfaces/ILVL1ConfigSvc.h</label>
        <link refid="de/db5/ILVL1ConfigSvc_8h_source"/>
        <childnode refid="308661" relation="include">
        </childnode>
        <childnode refid="308662" relation="include">
        </childnode>
      </node>
      <node id="308674">
        <label>AsgTools/SetProperty.h</label>
        <link refid="df/db0/SetProperty_8h_source"/>
      </node>
      <node id="308654">
        <label>inttypes.h</label>
      </node>
    </incdepgraph>
    <innernamespace refid="d2/d87/namespaceTrig">Trig</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//<sp/>$Id:<sp/>TrigConfBunchCrossingTool.cxx<sp/>628934<sp/>2014-11-17<sp/>16:42:54Z<sp/>ssnyder<sp/>$</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//<sp/>STL<sp/>include(s):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;algorithm&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Gaudi/Athena<sp/>include(s):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;AthenaKernel/errorcheck.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Trigger<sp/>config<sp/>include(s):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;TrigConfL1Data/BunchGroup.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;TrigConfL1Data/BunchGroupSet.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Local<sp/>include(s):</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;TrigConfBunchCrossingTool.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal">Trig<sp/>{</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string<sp/>TRIGCONF_INCIDENT_NAME<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;TrigConf&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><ref refid="df/d24/classTrig_1_1TrigConfBunchCrossingTool_1ac9aaf52037fca2f2c141603bfb7a621a" kindref="member" tooltip="Standard AlgTool constructor.">TrigConfBunchCrossingTool::TrigConfBunchCrossingTool</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string&amp;,</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::string&amp;<sp/>name,</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>IInterface*<sp/>)</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>:<sp/>BunchCrossingToolBase(<sp/>name<sp/>),<sp/>m_bgId(<sp/>-1<sp/>),</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_configSvc(<sp/></highlight><highlight class="stringliteral">&quot;TrigConf::TrigConfigSvc/TrigConfigSvc&quot;</highlight><highlight class="normal">,<sp/>name<sp/>),</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_incidentSvc(<sp/></highlight><highlight class="stringliteral">&quot;IncidentSvc&quot;</highlight><highlight class="normal">,<sp/>name<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Declare<sp/>the<sp/>interfaces<sp/>provided<sp/>by<sp/>the<sp/>tool:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>declareInterface&lt;<sp/>IBunchCrossingTool<sp/>&gt;(<sp/>this<sp/>);</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>declareInterface&lt;<sp/>IBunchCrossingConfProvider<sp/>&gt;(<sp/>this<sp/>);</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>declareInterface&lt;<sp/>IIncidentListener<sp/>&gt;(<sp/>this<sp/>);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Declare<sp/>the<sp/>properties<sp/>of<sp/>the<sp/>tool:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>declareProperty(<sp/></highlight><highlight class="stringliteral">&quot;FilledBunchNames&quot;</highlight><highlight class="normal">,<sp/>m_filledBunchNames,</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Possible<sp/>names<sp/>for<sp/>the<sp/>filled<sp/>bunch<sp/>groups<sp/>(DEPRECATED)&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>declareProperty(<sp/></highlight><highlight class="stringliteral">&quot;ConfigSvc&quot;</highlight><highlight class="normal">,<sp/>m_configSvc<sp/>);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/>StatusCode<sp/><ref refid="df/d24/classTrig_1_1TrigConfBunchCrossingTool_1ac69ae09d377dd4cdd9f07f211abc25aa" kindref="member" tooltip="Regular AlgTool initialization function.">TrigConfBunchCrossingTool::initialize</ref>()<sp/>{</highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Reset<sp/>he<sp/>bunch<sp/>group<sp/>ID,<sp/>so<sp/>at<sp/>the<sp/>next<sp/>update<sp/>we<sp/>definitely</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>load<sp/>a<sp/>new<sp/>configuration:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>m_bgId<sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Report<sp/>about<sp/>the<sp/>initialization:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_MSG_INFO(<sp/></highlight><highlight class="stringliteral">&quot;Initializing<sp/>TrigConfBunchCrossingTool<sp/>-<sp/>package<sp/>version:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;<sp/>PACKAGE_VERSION<sp/>);</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_MSG_INFO(<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>Maximal<sp/>bunch<sp/>spacing:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="db/df3/classTrig_1_1BunchCrossingToolBase_1acc703223701968694a4f2d576b84c1d7" kindref="member" tooltip="The maximum bunch spacing that the tool should consider.">m_maxBunchSpacing</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>ns&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_MSG_INFO(<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>Length<sp/>of<sp/>train<sp/>front:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="db/df3/classTrig_1_1BunchCrossingToolBase_1ad7b926a368d2961e6ce655c9d81dd89d" kindref="member" tooltip="Length of the &amp;quot;front&amp;quot; of a bunch train.">m_frontLength</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>ns&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_MSG_INFO(<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>Length<sp/>of<sp/>train<sp/>tail<sp/>:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/><ref refid="db/df3/classTrig_1_1BunchCrossingToolBase_1afca1209ab406f0572af565103c65ca62" kindref="member" tooltip="Length of the &amp;quot;tail&amp;quot; of a bunch train.">m_tailLength</ref><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/>ns&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_MSG_DEBUG(<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>Filled<sp/>bunch<sp/>names<sp/><sp/><sp/>:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>m_filledBunchNames<sp/>);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_MSG_DEBUG(<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>LVL1<sp/>config<sp/>service<sp/><sp/>:<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>m_configSvc<sp/>);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Retrieve<sp/>the<sp/>incident<sp/>service,<sp/>and<sp/>register<sp/>the<sp/>tool<sp/>for<sp/>the<sp/>trigger</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>configuration<sp/>incidents:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>CHECK(<sp/>m_incidentSvc.retrieve()<sp/>);</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>m_incidentSvc-&gt;addListener(<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,<sp/>TRIGCONF_INCIDENT_NAME<sp/>);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Retrieve<sp/>the<sp/>trigger<sp/>configuration<sp/>service:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>CHECK(<sp/>m_configSvc.retrieve()<sp/>);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>StatusCode::SUCCESS;</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="df/d24/classTrig_1_1TrigConfBunchCrossingTool_1a88a1e46e8248d2ec762e097e46ec8a30" kindref="member" tooltip="Function called when a registered incident happens.">TrigConfBunchCrossingTool::handle</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Incident&amp;<sp/>inc<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>inc.type()<sp/>==<sp/>TRIGCONF_INCIDENT_NAME<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>loadConfig().isFailure()<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>REPORT_MESSAGE(<sp/>MSG::ERROR<sp/>)</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>load<sp/>the<sp/>new<sp/>BunchGroup<sp/>configuration!&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>REPORT_MESSAGE(<sp/>MSG::ERROR<sp/>)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Results<sp/>will<sp/>be<sp/>unreliable!&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>REPORT_MESSAGE(<sp/>MSG::WARNING<sp/>)<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Received<sp/>a<sp/>not<sp/>requested<sp/>incident&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><ref refid="d5/ddc/classTrig_1_1IBunchCrossingConfProvider_1ad30fc9b02c7c88c2beadda0071a0d4a6" kindref="member" tooltip="Declare the interface that this class provides.">IBunchCrossingConfProvider::configid_type</ref></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><ref refid="df/d24/classTrig_1_1TrigConfBunchCrossingTool_1ae308cbfac79210b738d9776a7d1353bb" kindref="member" tooltip="Unique identifier for the current configuration.">TrigConfBunchCrossingTool::configID</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">static_cast&lt;</highlight><highlight class="normal"><sp/><ref refid="d5/ddc/classTrig_1_1IBunchCrossingConfProvider_1ad30fc9b02c7c88c2beadda0071a0d4a6" kindref="member" tooltip="Declare the interface that this class provides.">configid_type</ref><sp/></highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<sp/>m_bgId<sp/>);</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/>std::vector&lt;<sp/>float<sp/>&gt;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><ref refid="df/d24/classTrig_1_1TrigConfBunchCrossingTool_1a6ff2271d672bf6aecfb0a63e06f16488" kindref="member" tooltip="Override the default implementation because this tool doesn&amp;#39;t provide this info...">TrigConfBunchCrossingTool::configuredIntensitiesBeam1</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std::vector&lt;<sp/>float<sp/>&gt;();</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/>std::vector&lt;<sp/>float<sp/>&gt;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><ref refid="df/d24/classTrig_1_1TrigConfBunchCrossingTool_1a9ec884fb061eb236fdbc68f2ee017e6c" kindref="member" tooltip="Override the default implementation because this tool doesn&amp;#39;t provide this info...">TrigConfBunchCrossingTool::configuredIntensitiesBeam2</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std::vector&lt;<sp/>float<sp/>&gt;();</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/>std::vector&lt;<sp/>float<sp/>&gt;</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><ref refid="df/d24/classTrig_1_1TrigConfBunchCrossingTool_1a6de561843e78231f26cc90bcedb83439" kindref="member" tooltip="Override the default implementation because this tool doesn&amp;#39;t provide this info...">TrigConfBunchCrossingTool::configuredUnpairedIntensitiesBeam1</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std::vector&lt;<sp/>float<sp/>&gt;();</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/>std::vector&lt;<sp/>float<sp/>&gt;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><ref refid="df/d24/classTrig_1_1TrigConfBunchCrossingTool_1a1b7f5af137176edf3b53fcd458cfce3d" kindref="member" tooltip="Override the default implementation because this tool doesn&amp;#39;t provide this info...">TrigConfBunchCrossingTool::configuredUnpairedIntensitiesBeam2</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>std::vector&lt;<sp/>float<sp/>&gt;();</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/>StatusCode<sp/>TrigConfBunchCrossingTool::loadConfig()<sp/>{</highlight></codeline>
<codeline lineno="176"><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>if<sp/>the<sp/>needed<sp/>info<sp/>is<sp/>even<sp/>there:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!<sp/>m_configSvc-&gt;bunchGroupSet()<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>REPORT_ERROR(<sp/>StatusCode::FAILURE<sp/>)</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Trigger<sp/>configuration<sp/>service<sp/>doesn&apos;t<sp/>provide<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;BunchGroupSet<sp/>information&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>REPORT_ERROR(<sp/>StatusCode::FAILURE<sp/>)</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Could<sp/>you<sp/>be<sp/>reading<sp/>MC<sp/>files<sp/>with<sp/>this<sp/>tool?&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>StatusCode::FAILURE;</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Check<sp/>if<sp/>we<sp/>already<sp/>have<sp/>the<sp/>correct<sp/>configuration:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>m_configSvc-&gt;bunchGroupSet()-&gt;id()<sp/>==<sp/>m_bgId<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>StatusCode::SUCCESS;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Report<sp/>to<sp/>the<sp/>user<sp/>what<sp/>we&apos;re<sp/>doing:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_MSG_INFO(<sp/></highlight><highlight class="stringliteral">&quot;Updating<sp/>tool<sp/>configuration<sp/>to<sp/>BGKey<sp/>#&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;<sp/>m_configSvc-&gt;bunchGroupSet()-&gt;id()<sp/>);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Print<sp/>the<sp/>configuration<sp/>for<sp/>debugging<sp/>purposes,<sp/>and<sp/>remember<sp/>which<sp/>one</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we&apos;re<sp/>processing:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>m_bgId<sp/>=<sp/>m_configSvc-&gt;bunchGroupSet()-&gt;id();</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>printBunchGroups();</highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Select<sp/>the<sp/>collision<sp/>bunch<sp/>group:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::vector&lt;<sp/>TrigConf::BunchGroup<sp/>&gt;&amp;<sp/>bgs<sp/>=</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_configSvc-&gt;bunchGroupSet()-&gt;bunchGroups();</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std::vector&lt;<sp/>TrigConf::BunchGroup<sp/>&gt;::const_iterator<sp/>filled_bg<sp/>=<sp/>bgs.begin();</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>++filled_bg;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_MSG_INFO(<sp/></highlight><highlight class="stringliteral">&quot;Taking<sp/>the<sp/>second<sp/>bunch<sp/>group<sp/>as<sp/>the<sp/>colliding<sp/>bunch<sp/>group&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="209"><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>interpret<sp/>the<sp/>information:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_CHECK(<sp/><ref refid="db/df3/classTrig_1_1BunchCrossingToolBase_1ac983cbae796e341d7371902b41a4587c" kindref="member" tooltip="Interpret the configuration for single bunches.">loadSingleBunches</ref>(<sp/>filled_bg-&gt;bunches()<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_CHECK(<sp/><ref refid="db/df3/classTrig_1_1BunchCrossingToolBase_1a289406fc3f36e544aa02e16673dd3a04" kindref="member" tooltip="Interpret the configuration for bunch trains.">loadBunchTrains</ref>(<sp/>filled_bg-&gt;bunches()<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Select<sp/>the<sp/>unpaired<sp/>bunches.<sp/>The<sp/>overlaps<sp/>are<sp/>taken<sp/>care<sp/>of<sp/>by<sp/>the</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>base<sp/>tool.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std::vector&lt;<sp/>int<sp/>&gt;<sp/>unpaired;</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>These<sp/>are<sp/>the<sp/>&quot;unpaired<sp/>isolated&quot;<sp/>bunches:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bgs.size()<sp/>&gt;<sp/>4<sp/>)<sp/>unpaired.insert(<sp/>unpaired.end(),<sp/>bgs[<sp/>4<sp/>].bunches().begin(),</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bgs[<sp/>4<sp/>].bunches().end()<sp/>);</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>These<sp/>are<sp/>the<sp/>&quot;unpaired<sp/>non-isolated&quot;<sp/>bunches:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>bgs.size()<sp/>&gt;<sp/>5<sp/>)<sp/>unpaired.insert(<sp/>unpaired.end(),<sp/>bgs[<sp/>5<sp/>].bunches().begin(),</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bgs[<sp/>5<sp/>].bunches().end()<sp/>);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>These<sp/>are<sp/>the<sp/>general<sp/>unpaired<sp/>bunches:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="229"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>In<sp/>2012<sp/>bunch<sp/>group<sp/>7<sp/>no<sp/>longer<sp/>means<sp/>unpaired<sp/>bunches,<sp/>but<sp/>is<sp/>a<sp/>special</highlight></codeline>
<codeline lineno="230"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>group<sp/>used<sp/>for<sp/>triggering<sp/>on<sp/>bunches<sp/>excluding<sp/>the<sp/>first<sp/>3<sp/>bunches<sp/>of<sp/>trains.</highlight></codeline>
<codeline lineno="231"><highlight class="comment"></highlight></codeline>
<codeline lineno="232"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>if(<sp/>bgs.size()<sp/>&gt;<sp/>7<sp/>)<sp/>unpaired.insert(<sp/>unpaired.end(),<sp/>bgs[<sp/>7<sp/>].bunches().begin(),</highlight></codeline>
<codeline lineno="233"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bgs[<sp/>7<sp/>].bunches().end()<sp/>);</highlight></codeline>
<codeline lineno="234"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>interpret<sp/>the<sp/>information:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ATH_CHECK(<sp/><ref refid="db/df3/classTrig_1_1BunchCrossingToolBase_1ad84da5ff8344107234e53aeff5e18bee" kindref="member" tooltip="Interpret the configuration for unpaired bunches.">loadUnpairedBunches</ref>(<sp/>unpaired,<sp/>unpaired<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Print<sp/>the<sp/>configuration<sp/>to<sp/>give<sp/>some<sp/>feedback<sp/>to<sp/>the<sp/>user:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="db/df3/classTrig_1_1BunchCrossingToolBase_1a29b990621fc9b619cf2b7bd653a36c1d" kindref="member" tooltip="Function printing the configuration of the tool.">printConfig</ref>();</highlight></codeline>
<codeline lineno="243"><highlight class="normal"></highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Let<sp/>everybody<sp/>know<sp/>that<sp/>the<sp/>configuration<sp/>of<sp/>the<sp/>tool<sp/>has<sp/>changed:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>m_incidentSvc-&gt;fireIncident(<sp/>Incident(<sp/></highlight><highlight class="stringliteral">&quot;BunchConfiguration<sp/>update&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="dd/d09/classTrig_1_1BunchCrossingConfProviderBase_1af55d06296531100f4d78dfd5aee04e81" kindref="member" tooltip="Type name for the incident that such tools should emit.">BUNCH_CONFIG_INCIDENT_NAME</ref><sp/>)<sp/>);</highlight></codeline>
<codeline lineno="247"><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>StatusCode::SUCCESS;</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="250"><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>TrigConfBunchCrossingTool::printBunchGroups()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Skip<sp/>the<sp/>rest<sp/>if<sp/>nothing<sp/>will<sp/>be<sp/>printed<sp/>anyway:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>!<sp/>msgLvl(<sp/>MSG::VERBOSE<sp/>)<sp/>)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="259"><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>REPORT_MESSAGE(<sp/>MSG::VERBOSE<sp/>)<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;Printing<sp/>BunchGroup<sp/>configuration:&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>std::vector&lt;<sp/>TrigConf::BunchGroup<sp/>&gt;&amp;<sp/>bgs<sp/>=</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m_configSvc-&gt;bunchGroupSet()-&gt;bunchGroups();</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std::vector&lt;<sp/>TrigConf::BunchGroup<sp/>&gt;::const_iterator<sp/>itr<sp/>=<sp/>bgs.begin();</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>std::vector&lt;<sp/>TrigConf::BunchGroup<sp/>&gt;::const_iterator<sp/>end<sp/>=<sp/>bgs.end();</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(<sp/>;<sp/>itr<sp/>!=<sp/>end;<sp/>++itr<sp/>)<sp/>{</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>REPORT_MESSAGE(<sp/>MSG::VERBOSE<sp/>)<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/>BG<sp/>\&quot;&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>itr-&gt;name()<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;\&quot;:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&lt;&lt;<sp/>itr-&gt;bunches();</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="272"><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/cvmfs/atlas.cern.ch/repo/sw/ASG/AnalysisBase/2.4.28/TrigBunchCrossingTool/src/TrigConfBunchCrossingTool.cxx"/>
  </compounddef>
</doxygen>
